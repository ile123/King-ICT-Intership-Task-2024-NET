# King-ICT-Intership-Task-2024-NET

- **How to configure the db**
  Open the terminal in the solution root directory, and type the following command:
  `sudo docker compose -f product_db.yml up --build`
  This will run the docker compose file and it will create the db. The compose file is located in the solution root directory.
  In order to create the tables for the db run the following commands(these following commands where generated by JetBrains Rider):
  ```
    1. dotnet ef migrations add --project Api/Api.csproj --startup-project Api/Api.csproj --context Api.Data.AppDbContext --configuration Debug <name_of_migration> --output-dir Migrations
    2. dotnet ef database update --project Api/Api.csproj --startup-project Api/Api.csproj --context Api.Data.AppDbContext --configuration Debug <name_of_migration>
  ```
  In order to run the solution, enter the Api project and run the following command:
  `dotnet run`
- **Authentication and authorization**
  Application supports the creation of users that once authenticated, they can use the application endpoints. For testing purposes it is possible to create two test users(test_user and test_admin) by calling the */api/Auth/create-test-users* endpoint.
  For using the test_user:
  ```
    "email": "test_user@test.com"
    "password": "test"
  ```
  For using the test_admin:
  ```
    "email": "test_admin@test.com"
    "password": "test"
  ```

- **Testing the application**
  There are two ways:
   - By calling the *api/Product/fetch-data-from-api* endpoint and storing the products to the db and testing the endpoints using a api development tool(like Postman or Yaak). Only a user with the role of admin can call the mentoined endpoint, so it is necessary to log in as test_admin.
   - By running XUnit tests located in the Api.Tests project.